# Tmux 推荐配置 - 优化历史导航体验

# 基础设置
set -g default-terminal "screen-256color"
set -g history-limit 50000
set -g mouse on

# 前缀键设置（如果您更喜欢 Ctrl+a）
# unbind C-b
# set -g prefix C-a
# bind C-a send-prefix

# 设置 Vi 模式（更高效）
set -g mode-keys vi

# 窗口和面板编号从1开始
set -g base-index 1
setw -g pane-base-index 1

# 状态栏显示复制模式
setw -g window-status-current-format "#I:#W#F"
setw -g window-status-format "#I:#W#F"

# 快捷键绑定
bind r source-file ~/.tmux.conf \; display "配置已重载"

# 更方便的分割窗口
bind | split-window -h
bind - split-window -v

# Vi 风格的面板导航
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Vi 风格的复制模式快捷键
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -sel clip -i"
bind -T copy-mode-vi Y send -X copy-line
bind -T copy-mode-vi r send -X rectangle-toggle
bind -T copy-mode-vi Escape send -X cancel

# 快速搜索
bind / command-prompt -p "搜索:" "copy-mode \; send -X search-forward \"%%\""
bind ? command-prompt -p "反向搜索:" "copy-mode \; send -X search-backward \"%%\""

# 页面导航优化
bind PageUp copy-mode -u
bind -n PageUp copy-mode -u
bind -n PageDown copy-mode

# 快速跳转到行
bind g command-prompt -p "跳转到行:" "copy-mode \; send -X goto-line \"%%\""

# 鼠标配置优化
set -g mouse on
setw -g mouse on

# 防止自动重命名窗口
setw -g automatic-rename off
set -g allow-rename off

# 状态栏显示信息
set -g status-right "#{?pane_in_mode,复制模式 ,}#{?client_prefix,前缀 ,}%Y-%m-%d %H:%M"